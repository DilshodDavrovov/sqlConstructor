{"version":3,"file":"js/app.79832088.js","mappings":"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","sources":["webpack://sql-constructor-vue2/./src/App.vue?ecf7","webpack://sql-constructor-vue2/./src/utils/schema.js","webpack://sql-constructor-vue2/./src/store.js","webpack://sql-constructor-vue2/./src/utils/sql.js","webpack://sql-constructor-vue2/./src/utils/advancedSqlParser.js","webpack://sql-constructor-vue2/src/App.vue","webpack://sql-constructor-vue2/./src/App.vue?6a4a","webpack://sql-constructor-vue2/./src/App.vue","webpack://sql-constructor-vue2/./src/main.js","webpack://sql-constructor-vue2/webpack/bootstrap","webpack://sql-constructor-vue2/webpack/runtime/chunk loaded","webpack://sql-constructor-vue2/webpack/runtime/define property getters","webpack://sql-constructor-vue2/webpack/runtime/global","webpack://sql-constructor-vue2/webpack/runtime/hasOwnProperty shorthand","webpack://sql-constructor-vue2/webpack/runtime/jsonp chunk loading","webpack://sql-constructor-vue2/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"app\"},[_c('aside',{staticClass:\"sidebar\"},[_vm._m(0),_c('div',{staticClass:\"list\"},_vm._l((_vm.extendedSchema.tables),function(table){return _c('div',{key:table.name,staticClass:\"panel\",staticStyle:{\"padding\":\"8px\"}},[_c('div',{staticClass:\"row\",staticStyle:{\"justify-content\":\"space-between\",\"cursor\":\"pointer\"},on:{\"click\":function($event){return _vm.toggleExpand(table.name)}}},[_c('div',[_c('strong',[_vm._v(_vm._s(table.name))]),(table.isCTE)?_c('span',{staticClass:\"chip\",staticStyle:{\"font-size\":\"10px\",\"margin-left\":\"4px\"}},[_vm._v(\"CTE\")]):_vm._e(),_c('span',{staticClass:\"muted\"},[_vm._v(\" (\"+_vm._s(table.fields.length)+\")\")])]),_c('span',{staticClass:\"muted\"},[_vm._v(_vm._s(_vm.isExpanded(table.name) ? '−' : '+'))])]),(_vm.isExpanded(table.name))?_c('div',{staticClass:\"list\",staticStyle:{\"margin-top\":\"6px\"}},_vm._l((table.fields),function(f){return _c('button',{key:table.name + '.' + f.name,staticClass:\"chip\",on:{\"click\":function($event){$event.stopPropagation();return _vm.addFieldFromSidebar(table.name, f.name)}}},[_vm._v(\" \"+_vm._s(table.name)+\".\"+_vm._s(f.name)+\" \")])}),0):_vm._e()])}),0),_c('p',{staticClass:\"muted\"},[_vm._v(\"Совет: раскройте таблицу и нажмите на нужное поле\")])]),_c('section',{staticClass:\"content\"},[_c('div',{staticClass:\"toolbar\"},[_c('h1',[_vm._v(\"SQL Конструктор\")]),_c('div',{staticClass:\"spacer\"}),_c('button',{staticClass:\"primary\",on:{\"click\":_vm.copySQL}},[_vm._v(\"Копировать SQL\")])]),_c('div',{staticClass:\"tabs-bar\"},[_c('div',{staticClass:\"row\",staticStyle:{\"flex-wrap\":\"nowrap\",\"gap\":\"8px\",\"align-items\":\"center\",\"min-width\":\"0\"}},[_c('div',{staticClass:\"row\",staticStyle:{\"gap\":\"8px\",\"overflow-x\":\"auto\",\"flex-shrink\":\"1\",\"min-width\":\"0\"}},[_c('div',{staticClass:\"chip\",class:{active: _vm.store.currentCTEIndex === -1},staticStyle:{\"user-select\":\"none\"},on:{\"click\":function($event){return _vm.selectCTE(-1)}}},[_vm._v(\" Основной запрос \")]),_vm._l((_vm.store.ctes),function(cte,idx){return _c('div',{key:'cte-' + idx,staticClass:\"chip\",class:{active: idx === _vm.store.currentCTEIndex},staticStyle:{\"user-select\":\"none\"},on:{\"click\":function($event){return _vm.selectCTE(idx)}}},[_vm._v(\" \"+_vm._s(cte.name)+\" \")])})],2),_c('button',{staticClass:\"success\",staticStyle:{\"flex-shrink\":\"0\"},on:{\"click\":_vm.addCTE}},[_vm._v(\"+ Добавить CTE\")])])]),(_vm.store.currentCTEIndex === -1)?_c('div',{staticClass:\"tabs-bar\"},[_c('div',{staticClass:\"row\",staticStyle:{\"flex-wrap\":\"nowrap\",\"gap\":\"8px\",\"align-items\":\"center\",\"min-width\":\"0\"}},[_c('div',{staticClass:\"row\",staticStyle:{\"gap\":\"8px\",\"overflow-x\":\"auto\",\"flex-shrink\":\"1\",\"min-width\":\"0\"}},_vm._l((_vm.store.queries),function(q,idx){return _c('div',{key:idx,staticClass:\"chip\",class:{active: idx === _vm.store.currentQueryIndex},staticStyle:{\"user-select\":\"none\"},on:{\"click\":function($event){return _vm.selectQuery(idx)}}},[_vm._v(\" \"+_vm._s(q.name || ('Запрос ' + (idx+1)))+\" \")])}),0),_c('button',{staticClass:\"success\",staticStyle:{\"flex-shrink\":\"0\"},on:{\"click\":_vm.addQuery}},[_vm._v(\"+ Добавить запрос\")]),(_vm.store.currentQueryIndex > 0)?_c('label',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"gap\":\"6px\",\"white-space\":\"nowrap\",\"flex-shrink\":\"0\"}},[_vm._v(\" UNION ALL: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current.unionAllNext),expression:\"current.unionAllNext\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.current.unionAllNext)?_vm._i(_vm.current.unionAllNext,null)>-1:(_vm.current.unionAllNext)},on:{\"change\":function($event){var $$a=_vm.current.unionAllNext,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.current, \"unionAllNext\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.current, \"unionAllNext\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.current, \"unionAllNext\", $$c)}}}})]):_vm._e()])]):_vm._e(),(_vm.store.currentCTEIndex >= 0 && _vm.currentCTE)?_c('div',{staticClass:\"tabs-bar\"},[_c('div',{staticClass:\"row\",staticStyle:{\"flex-wrap\":\"nowrap\",\"gap\":\"8px\",\"align-items\":\"center\",\"min-width\":\"0\"}},[_c('div',{staticClass:\"row\",staticStyle:{\"gap\":\"8px\",\"overflow-x\":\"auto\",\"flex-shrink\":\"1\",\"min-width\":\"0\"}},_vm._l((_vm.currentCTE.queries),function(q,idx){return _c('div',{key:'cte-query-' + idx,staticClass:\"chip\",class:{active: idx === _vm.currentCTE.currentQueryIndex},staticStyle:{\"user-select\":\"none\"},on:{\"click\":function($event){return _vm.selectCTEQuery(idx)}}},[_vm._v(\" \"+_vm._s(q.name || ('Подзапрос ' + (idx+1)))+\" \")])}),0),_c('button',{staticClass:\"success\",staticStyle:{\"flex-shrink\":\"0\"},on:{\"click\":_vm.addCTEQuery}},[_vm._v(\"+ Добавить подзапрос\")]),(_vm.currentCTE && _vm.currentCTE.currentQueryIndex > 0)?_c('label',{staticStyle:{\"display\":\"flex\",\"align-items\":\"center\",\"gap\":\"6px\",\"white-space\":\"nowrap\",\"flex-shrink\":\"0\"}},[_vm._v(\" UNION ALL: \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current.unionAllNext),expression:\"current.unionAllNext\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.current.unionAllNext)?_vm._i(_vm.current.unionAllNext,null)>-1:(_vm.current.unionAllNext)},on:{\"change\":function($event){var $$a=_vm.current.unionAllNext,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(_vm.current, \"unionAllNext\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(_vm.current, \"unionAllNext\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(_vm.current, \"unionAllNext\", $$c)}}}})]):_vm._e()])]):_vm._e(),_c('datalist',{attrs:{\"id\":\"field-options\"}},_vm._l((_vm.availableFields),function(opt){return _c('option',{key:opt,domProps:{\"value\":opt}},[_vm._v(_vm._s(opt))])}),0),_c('div',{staticClass:\"main\"},[_c('div',{staticClass:\"panel scroll\"},[_c('div',{staticClass:\"row\",staticStyle:{\"justify-content\":\"space-between\",\"margin-bottom\":\"10px\"}},[_c('div',{staticClass:\"row\",staticStyle:{\"align-items\":\"center\",\"gap\":\"10px\"}},[_c('h2',{staticStyle:{\"margin\":\"0\"}},[_vm._v(\"Выбранные поля\")]),(_vm.store.currentCTEIndex >= 0 && _vm.currentCTE && _vm.currentCTE.currentQueryIndex === 0)?_c('div',{staticClass:\"row\",staticStyle:{\"align-items\":\"center\",\"gap\":\"6px\"}},[_c('label',[_vm._v(\"Имя CTE:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.currentCTE.name),expression:\"currentCTE.name\"}],staticStyle:{\"max-width\":\"120px\"},attrs:{\"type\":\"text\",\"placeholder\":\"cte_name\"},domProps:{\"value\":(_vm.currentCTE.name)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.currentCTE, \"name\", $event.target.value)}}})]):_vm._e()]),_c('div',{staticClass:\"row\",staticStyle:{\"gap\":\"8px\"}},[_c('button',{on:{\"click\":_vm.addCustomField}},[_vm._v(\"+ Добавить поле\")]),(_vm.store.currentCTEIndex >= 0 && _vm.store.ctes.length > 0 && _vm.currentCTE && _vm.currentCTE.currentQueryIndex === 0)?_c('button',{staticClass:\"danger\",attrs:{\"title\":\"Удалить CTE\"},on:{\"click\":function($event){return _vm.removeCTE(_vm.store.currentCTEIndex)}}},[_vm._v(\" Удалить CTE \")]):_vm._e(),(_vm.store.currentCTEIndex === -1 && _vm.store.queries.length > 1)?_c('button',{staticClass:\"danger\",attrs:{\"title\":\"Удалить запрос\"},on:{\"click\":function($event){return _vm.removeQuery(_vm.store.currentQueryIndex)}}},[_vm._v(\" Удалить запрос \")]):_vm._e(),(_vm.store.currentCTEIndex >= 0 && _vm.currentCTE && _vm.currentCTE.queries.length > 1)?_c('button',{staticClass:\"danger\",attrs:{\"title\":\"Удалить подзапрос\"},on:{\"click\":function($event){return _vm.removeCTEQuery(_vm.currentCTE.currentQueryIndex)}}},[_vm._v(\" Удалить подзапрос \")]):_vm._e()])]),_c('div',{staticClass:\"section\"},[(_vm.current.fields.length === 0)?_c('div',{staticClass:\"muted\"},[_vm._v(\"Добавьте поля из дерева слева\")]):_c('div',{staticClass:\"table\"},[_vm._m(1),_vm._l((_vm.current.fields),function(sf,idx){return _c('div',{key:sf.table + '.' + sf.name,staticClass:\"row\"},[_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(sf.expression),expression:\"sf.expression\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"text\",\"placeholder\":sf.table ? (sf.table + '.' + sf.name) : 'Выражение',\"list\":\"field-options\"},domProps:{\"value\":(sf.expression)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.$set(sf, \"expression\", $event.target.value)},function($event){return _vm.onFieldExpressionChange(sf)}]}})]),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(sf.alias),expression:\"sf.alias\"}],attrs:{\"type\":\"text\",\"placeholder\":sf.name},domProps:{\"value\":(sf.alias)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(sf, \"alias\", $event.target.value)}}})]),_c('div',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(sf.agg),expression:\"sf.agg\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(sf, \"agg\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"(нет)\")]),_c('option',[_vm._v(\"COUNT\")]),_c('option',[_vm._v(\"SUM\")]),_c('option',[_vm._v(\"AVG\")]),_c('option',[_vm._v(\"MIN\")]),_c('option',[_vm._v(\"MAX\")])])]),_c('div',{staticClass:\"row\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('button',{staticClass:\"ghost\",attrs:{\"title\":\"Вверх\",\"disabled\":idx===0},on:{\"click\":function($event){return _vm.moveFieldUp(idx)}}},[_vm._v(\"▲\")]),_c('button',{staticClass:\"ghost\",attrs:{\"title\":\"Вниз\",\"disabled\":idx===_vm.current.fields.length-1},on:{\"click\":function($event){return _vm.moveFieldDown(idx)}}},[_vm._v(\"▼\")]),_c('button',{staticClass:\"ghost\",attrs:{\"title\":\"Удалить\"},on:{\"click\":function($event){return _vm.removeField(sf.table, sf.name)}}},[_vm._v(\"×\")])])])})],2)]),_c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"row\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('h2',{staticStyle:{\"margin\":\"0\"}},[_vm._v(\"Соединения (JOIN)\")]),_c('button',{on:{\"click\":_vm.addJoin}},[_vm._v(\"Добавить JOIN\")])]),_c('div',{staticClass:\"list\"},[(_vm.current.joins.length===0)?_c('div',{staticClass:\"muted\"},[_vm._v(\"Нет соединений\")]):_vm._e(),_vm._l((_vm.current.joins),function(j,idx){return _c('div',{key:idx,staticClass:\"grid-3\",staticStyle:{\"align-items\":\"end\"}},[_c('div',[_c('label',[_vm._v(\"Тип\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(j.type),expression:\"j.type\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(j, \"type\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',[_vm._v(\"INNER\")]),_c('option',[_vm._v(\"LEFT\")]),_c('option',[_vm._v(\"RIGHT\")]),_c('option',[_vm._v(\"FULL\")])])]),_c('div',[_c('label',[_vm._v(\"Таблица\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(j.rightTable),expression:\"j.rightTable\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(j, \"rightTable\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.allTables),function(t){return _c('option',{key:t,domProps:{\"value\":t}},[_vm._v(_vm._s(t))])}),0)]),_c('div',{staticClass:\"row\",staticStyle:{\"gap\":\"6px\"}},[_c('button',{staticClass:\"ghost\",on:{\"click\":function($event){return _vm.addJoinCondition(j)}}},[_vm._v(\"+ Условие\")]),_c('button',{staticClass:\"danger\",on:{\"click\":function($event){return _vm.removeJoin(idx)}}},[_vm._v(\"Удалить\")])]),_vm._l((j.on),function(c,cIdx){return _c('div',{key:cIdx,staticClass:\"grid-4\",staticStyle:{\"grid-column\":\"1/-1\"}},[_c('div',[_c('label',[_vm._v(\"Левая сторона\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(c.left),expression:\"c.left\"}],attrs:{\"type\":\"text\",\"placeholder\":\"orders.user_id\",\"list\":\"field-options\"},domProps:{\"value\":(c.left)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.$set(c, \"left\", $event.target.value)},function($event){return _vm.onFieldExpressionChange({expression: c.left})}]}})]),_c('div',[_c('label',[_vm._v(\"Оператор\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(c.op),expression:\"c.op\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(c, \"op\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',[_vm._v(\"=\")]),_c('option',[_vm._v(\"!=\")]),_c('option',[_vm._v(\">\")]),_c('option',[_vm._v(\"<\")])])]),_c('div',[_c('label',[_vm._v(\"Правая сторона\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(c.right),expression:\"c.right\"}],attrs:{\"type\":\"text\",\"placeholder\":\"users.id\",\"list\":\"field-options\"},domProps:{\"value\":(c.right)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.$set(c, \"right\", $event.target.value)},function($event){return _vm.onFieldExpressionChange({expression: c.right})}]}})]),_c('div',{staticStyle:{\"align-self\":\"end\"}},[_c('button',{staticClass:\"danger\",attrs:{\"title\":\"Удалить условие\"},on:{\"click\":function($event){return _vm.removeJoinCondition(j, cIdx)}}},[_vm._v(\"×\")])])])}),_c('div',{staticClass:\"hr\",staticStyle:{\"grid-column\":\"1/-1\"}})],2)})],2)]),_c('div',{staticClass:\"section\"},[_c('div',{staticClass:\"row\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('h2',{staticStyle:{\"margin\":\"0\"}},[_vm._v(\"Условия (WHERE)\")]),_c('button',{on:{\"click\":_vm.addFilter}},[_vm._v(\"Добавить условие\")])]),_c('div',{staticClass:\"list\"},[(_vm.current.filters.length===0)?_c('div',{staticClass:\"muted\"},[_vm._v(\"Нет условий\")]):_vm._e(),_vm._l((_vm.current.filters),function(f,idx){return _c('div',{key:idx,staticClass:\"grid-3\",staticStyle:{\"align-items\":\"end\"}},[_c('div',[_c('label',[_vm._v(\"Поле\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(f.field),expression:\"f.field\"}],attrs:{\"type\":\"text\",\"placeholder\":\"users.age\",\"list\":\"field-options\"},domProps:{\"value\":(f.field)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.$set(f, \"field\", $event.target.value)},function($event){return _vm.onFieldExpressionChange({expression: f.field})}]}})]),_c('div',[_c('label',[_vm._v(\"Оператор\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(f.op),expression:\"f.op\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(f, \"op\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',[_vm._v(\"=\")]),_c('option',[_vm._v(\"!=\")]),_c('option',[_vm._v(\">\")]),_c('option',[_vm._v(\"<\")]),_c('option',[_vm._v(\">=\")]),_c('option',[_vm._v(\"<=\")]),_c('option',[_vm._v(\"LIKE\")]),_c('option',[_vm._v(\"IN\")]),_c('option',[_vm._v(\"BETWEEN\")]),_c('option',[_vm._v(\"IS NULL\")]),_c('option',[_vm._v(\"IS NOT NULL\")])])]),_c('div',[_c('label',[_vm._v(\"Значение\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(f.value),expression:\"f.value\"}],attrs:{\"type\":\"text\",\"placeholder\":\"30 или 'john' или (1,2)\"},domProps:{\"value\":(f.value)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(f, \"value\", $event.target.value)}}})]),_c('div',{staticStyle:{\"grid-column\":\"1/-1\",\"display\":\"flex\",\"gap\":\"8px\",\"align-items\":\"center\"}},[_c('label',[_vm._v(\"Связь со след. условием\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(f.logic),expression:\"f.logic\"}],staticStyle:{\"width\":\"120px\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(f, \"logic\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',[_vm._v(\"AND\")]),_c('option',[_vm._v(\"OR\")])]),_c('button',{staticClass:\"danger\",staticStyle:{\"margin-left\":\"auto\"},on:{\"click\":function($event){return _vm.removeFilter(idx)}}},[_vm._v(\"Удалить\")])]),_c('div',{staticClass:\"hr\",staticStyle:{\"grid-column\":\"1/-1\"}})])})],2)]),_c('div',{staticClass:\"section grid-2\"},[_c('div',{staticClass:\"panel\"},[_c('h2',[_vm._v(\"Группировка\")]),_c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"row\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current.groupByInput),expression:\"current.groupByInput\"}],attrs:{\"type\":\"text\",\"placeholder\":\"users.country, users.city\",\"list\":\"field-options\"},domProps:{\"value\":(_vm.current.groupByInput)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.$set(_vm.current, \"groupByInput\", $event.target.value)},function($event){return _vm.onFieldExpressionChange({expression: _vm.current.groupByInput})}]}}),_c('button',{on:{\"click\":_vm.addGroup}},[_vm._v(\"Добавить\")])]),_c('div',{staticClass:\"row\",staticStyle:{\"flex-wrap\":\"wrap\",\"gap\":\"6px\"}},_vm._l((_vm.current.groupBy),function(g,idx){return _c('span',{key:idx,staticClass:\"chip\"},[_vm._v(\" \"+_vm._s(g)+\" \"),_c('button',{staticClass:\"ghost\",on:{\"click\":function($event){return _vm.removeGroup(idx)}}},[_vm._v(\"×\")])])}),0)]),_c('div',{staticClass:\"hr\"}),_c('h2',[_vm._v(\"Сортировка\")]),_c('div',{staticClass:\"list\"},[_c('div',{staticClass:\"row\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current.orderByInput.field),expression:\"current.orderByInput.field\"}],attrs:{\"type\":\"text\",\"placeholder\":\"users.created_at\",\"list\":\"field-options\"},domProps:{\"value\":(_vm.current.orderByInput.field)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.$set(_vm.current.orderByInput, \"field\", $event.target.value)},function($event){return _vm.onFieldExpressionChange({expression: _vm.current.orderByInput.field})}]}}),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.current.orderByInput.dir),expression:\"current.orderByInput.dir\"}],staticStyle:{\"width\":\"120px\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.current.orderByInput, \"dir\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',[_vm._v(\"ASC\")]),_c('option',[_vm._v(\"DESC\")])]),_c('button',{on:{\"click\":_vm.addOrder}},[_vm._v(\"Добавить\")])]),_c('div',{staticClass:\"list\"},_vm._l((_vm.current.orderBy),function(o,idx){return _c('div',{key:idx,staticClass:\"row\",staticStyle:{\"justify-content\":\"space-between\"}},[_c('span',[_vm._v(_vm._s(o.field)+\" \"+_vm._s(o.dir))]),_c('button',{staticClass:\"ghost\",on:{\"click\":function($event){return _vm.removeOrder(idx)}}},[_vm._v(\"×\")])])}),0)]),_c('div',{staticClass:\"hr\"}),_c('h2',[_vm._v(\"Лимит\")]),_c('div',{staticClass:\"row\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.current.limit),expression:\"current.limit\",modifiers:{\"number\":true}}],staticStyle:{\"max-width\":\"140px\"},attrs:{\"type\":\"number\",\"min\":\"0\",\"placeholder\":\"100\"},domProps:{\"value\":(_vm.current.limit)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.current, \"limit\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.current.offset),expression:\"current.offset\",modifiers:{\"number\":true}}],staticStyle:{\"max-width\":\"140px\"},attrs:{\"type\":\"number\",\"min\":\"0\",\"placeholder\":\"0\"},domProps:{\"value\":(_vm.current.offset)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.current, \"offset\", _vm._n($event.target.value))},\"blur\":function($event){return _vm.$forceUpdate()}}})])])])]),_c('div',{staticClass:\"panel scroll\",staticStyle:{\"min-height\":\"0\"}},[_c('div',{staticClass:\"row\",staticStyle:{\"justify-content\":\"space-between\",\"align-items\":\"center\",\"margin-bottom\":\"10px\"}},[_c('h2',{staticStyle:{\"margin\":\"0\"}},[_vm._v(\"SQL\")]),_c('div',{staticClass:\"row\",staticStyle:{\"gap\":\"8px\"}},[(_vm.isEditingSQL)?_c('button',{staticClass:\"success\",attrs:{\"title\":\"Применить изменения\"},on:{\"click\":_vm.applySQLChanges}},[_vm._v(\"Применить\")]):_vm._e(),(_vm.isEditingSQL)?_c('button',{staticClass:\"ghost\",attrs:{\"title\":\"Отменить изменения\"},on:{\"click\":_vm.cancelSQLEditing}},[_vm._v(\"Отмена\")]):_vm._e(),(!_vm.isEditingSQL)?_c('button',{staticClass:\"ghost\",attrs:{\"title\":\"Редактировать SQL\"},on:{\"click\":_vm.startSQLEditing}},[_vm._v(\"Редактировать\")]):_vm._e()])]),(_vm.isEditingSQL)?_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.editableSQL),expression:\"editableSQL\"}],staticClass:\"sql\",staticStyle:{\"resize\":\"vertical\",\"font-family\":\"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace\",\"min-height\":\"160px\",\"white-space\":\"pre\"},domProps:{\"value\":(_vm.editableSQL)},on:{\"input\":function($event){if($event.target.composing)return;_vm.editableSQL=$event.target.value}}}):_c('pre',{staticClass:\"sql\"},[_vm._v(_vm._s(_vm.sql))])])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticStyle:{\"margin-bottom\":\"10px\"}},[_c('strong',[_vm._v(\"Схема БД\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"thead\"},[_c('div',[_vm._v(\"Поле\")]),_c('div',[_vm._v(\"Алиас\")]),_c('div',[_vm._v(\"Агрегация\")]),_c('div')])\n}]\n\nexport { render, staticRenderFns }","export const demoSchema = {\r\n  tables: [\r\n    { name: 'users', fields: [\r\n      { name: 'id' }, { name: 'name' }, { name: 'email' }, { name: 'age' }, { name: 'country' }, { name: 'created_at' }\r\n    ]},\r\n    { name: 'orders', fields: [\r\n      { name: 'id' }, { name: 'user_id' }, { name: 'total' }, { name: 'status' }, { name: 'created_at' }\r\n    ]},\r\n    { name: 'products', fields: [\r\n      { name: 'id' }, { name: 'name' }, { name: 'price' }, { name: 'category' }\r\n    ]},\r\n    { name: 'order_items', fields: [\r\n      { name: 'id' }, { name: 'order_id' }, { name: 'product_id' }, { name: 'qty' }, { name: 'price' }\r\n    ]}\r\n  ]\r\n};\r\n\r\n\r\n","import Vue from 'vue';\r\nimport { demoSchema } from './utils/schema';\r\n\r\nfunction createEmptyQuery() {\r\n  return {\r\n    name: 'Запрос',\r\n    selectedTables: [],\r\n    fields: [], // { table, name, alias, agg }\r\n    joins: [], // { type, rightTable, on:[{left,op,right}] }\r\n    filters: [], // { field, op, value, logic }\r\n    groupBy: [],\r\n    orderBy: [], // { field, dir }\r\n    limit: null,\r\n    offset: null,\r\n    groupByInput: '',\r\n    orderByInput: { field: '', dir: 'ASC' },\r\n    unionAllNext: false,\r\n  };\r\n}\r\n\r\nfunction createEmptyCTE() {\r\n  return {\r\n    name: 'cte_1',\r\n    isCTE: true,\r\n    queries: [createEmptyQuery()], // CTE содержит массив подзапросов для UNION\r\n    currentQueryIndex: 0, // Текущий активный подзапрос в CTE\r\n  };\r\n}\r\n\r\nexport const store = Vue.observable({\r\n  schema: demoSchema,\r\n  queries: [ createEmptyQuery() ],\r\n  currentQueryIndex: 0,\r\n  ctes: [], // Common Table Expressions\r\n  currentCTEIndex: -1, // -1 означает что выбран основной запрос, >= 0 - индекс CTE\r\n});\r\n\r\nexport const getters = {\r\n  currentQuery() { return store.queries[store.currentQueryIndex]; },\r\n  currentCTE() { \r\n    return store.currentCTEIndex >= 0 ? store.ctes[store.currentCTEIndex] : null; \r\n  },\r\n  // Возвращает текущий активный элемент (подзапрос CTE или основной запрос)\r\n  currentItem() {\r\n    if (store.currentCTEIndex >= 0) {\r\n      const cte = store.ctes[store.currentCTEIndex];\r\n      return cte.queries[cte.currentQueryIndex];\r\n    }\r\n    return store.queries[store.currentQueryIndex];\r\n  },\r\n  // Получаем все таблицы включая CTE\r\n  allAvailableTables() {\r\n    const baseTables = store.schema.tables.map(t => t.name);\r\n    const cteTables = store.ctes.map(cte => cte.name);\r\n    return [...baseTables, ...cteTables];\r\n  }\r\n};\r\n\r\nexport const mutations = {\r\n  reset() {\r\n    store.queries = [ createEmptyQuery() ];\r\n    store.currentQueryIndex = 0;\r\n    store.ctes = [];\r\n    store.currentCTEIndex = -1;\r\n  },\r\n  addQuery() {\r\n    const q = createEmptyQuery();\r\n    q.name = `Запрос ${store.queries.length + 1}`;\r\n    store.queries.push(q);\r\n    store.currentQueryIndex = store.queries.length - 1;\r\n    store.currentCTEIndex = -1; // Переключаемся на основные запросы\r\n  },\r\n  removeQuery(index) {\r\n    if (store.queries.length === 1) return;\r\n    store.queries.splice(index, 1);\r\n    if (store.currentQueryIndex >= store.queries.length) {\r\n      store.currentQueryIndex = store.queries.length - 1;\r\n    }\r\n  },\r\n  selectQuery(index) {\r\n    if (index >= 0 && index < store.queries.length) {\r\n      store.currentQueryIndex = index;\r\n      store.currentCTEIndex = -1; // Переключаемся на основные запросы\r\n    }\r\n  },\r\n  \r\n  // CTE mutations\r\n  addCTE() {\r\n    const cte = createEmptyCTE();\r\n    cte.name = `cte_${store.ctes.length + 1}`;\r\n    store.ctes.push(cte);\r\n    store.currentCTEIndex = store.ctes.length - 1;\r\n  },\r\n  removeCTE(index) {\r\n    if (store.ctes.length === 0) return;\r\n    store.ctes.splice(index, 1);\r\n    if (store.currentCTEIndex >= store.ctes.length) {\r\n      store.currentCTEIndex = store.ctes.length > 0 ? store.ctes.length - 1 : -1;\r\n    }\r\n  },\r\n  selectCTE(index) {\r\n    if (index >= 0 && index < store.ctes.length) {\r\n      store.currentCTEIndex = index;\r\n    } else {\r\n      store.currentCTEIndex = -1; // Переключаемся на основные запросы\r\n    }\r\n  },\r\n  \r\n  // Управление подзапросами внутри CTE\r\n  addCTEQuery() {\r\n    if (store.currentCTEIndex >= 0) {\r\n      const cte = store.ctes[store.currentCTEIndex];\r\n      const q = createEmptyQuery();\r\n      q.name = `Подзапрос ${cte.queries.length + 1}`;\r\n      cte.queries.push(q);\r\n      cte.currentQueryIndex = cte.queries.length - 1;\r\n    }\r\n  },\r\n  removeCTEQuery(index) {\r\n    if (store.currentCTEIndex >= 0) {\r\n      const cte = store.ctes[store.currentCTEIndex];\r\n      if (cte.queries.length === 1) return;\r\n      cte.queries.splice(index, 1);\r\n      if (cte.currentQueryIndex >= cte.queries.length) {\r\n        cte.currentQueryIndex = cte.queries.length - 1;\r\n      }\r\n    }\r\n  },\r\n  selectCTEQuery(index) {\r\n    if (store.currentCTEIndex >= 0) {\r\n      const cte = store.ctes[store.currentCTEIndex];\r\n      if (index >= 0 && index < cte.queries.length) {\r\n        cte.currentQueryIndex = index;\r\n      }\r\n    }\r\n  },\r\n};\r\n\r\n\r\n","export function quoteIdentifier(id) {\r\n  return String(id || '').replace(/[^a-zA-Z0-9_\\.]/g, '');\r\n}\r\n\r\nexport function literal(value) {\r\n  if (value == null) return 'NULL';\r\n  const trimmed = ('' + value).trim();\r\n  if (/^\\(.*\\)$/.test(trimmed)) return trimmed;\r\n  if (/^\\d+(\\.\\d+)?$/.test(trimmed)) return trimmed;\r\n  if (/^'.*'$/.test(trimmed) || /^\".*\"$/.test(trimmed)) return trimmed;\r\n  return '\\'' + trimmed.replace(/'/g, \"''\") + '\\'';\r\n}\r\n\r\nexport function buildSingleSQL(state) {\r\n  let baseTable = state.selectedTables[0];\r\n  if (!baseTable && state.fields.length) {\r\n    baseTable = state.fields[0].table;\r\n  }\r\n  if (!baseTable) return '-- Добавьте хотя бы одно поле или выберите таблицу';\r\n  const fromTable = quoteIdentifier(baseTable);\r\n\r\n  const selected = state.fields.filter(f => state.fields.find(x => x.table===f.table && x.name===f.name));\r\n  const selectParts = selected.length > 0\r\n    ? selected.map(f => {\r\n        let expr = f.expression || `${f.table}.${f.name}`;\r\n        \r\n        // Проверяем, есть ли уже агрегатная функция в выражении\r\n        const hasAggregateFunction = /^(COUNT|SUM|AVG|MIN|MAX)\\s*\\(/i.test(expr);\r\n        \r\n        if (f.agg && !hasAggregateFunction) {\r\n          // Если есть агрегация в поле, но нет в выражении, применяем её\r\n          if (f.expression && f.expression !== `${f.table}.${f.name}`) {\r\n            // Если есть кастомное выражение, оборачиваем его в агрегацию\r\n            expr = f.agg + '(' + expr + ')';\r\n          } else {\r\n            // Если стандартное поле, используем table.field\r\n            const fq = quoteIdentifier(f.table) + '.' + quoteIdentifier(f.name);\r\n            expr = f.agg + '(' + fq + ')';\r\n          }\r\n        }\r\n        // Если агрегатная функция уже есть в выражении, используем его как есть\r\n        \r\n        return f.alias ? (expr + ' AS ' + quoteIdentifier(f.alias)) : expr;\r\n      })\r\n    : ['*'];\r\n\r\n  const joinParts = (state.joins || []).map(j => {\r\n    if (!j.rightTable) return null;\r\n    const type = j.type || 'INNER';\r\n    const on = (j.on || []).filter(x => x.left && x.right).map(x => `${quoteIdentifier(x.left)} ${x.op || '='} ${quoteIdentifier(x.right)}`);\r\n    const onStr = on.length ? (' ON ' + on.join(' AND ')) : '';\r\n    return `${type} JOIN ${quoteIdentifier(j.rightTable)}${onStr}`;\r\n  }).filter(Boolean);\r\n\r\n  const whereParts = [];\r\n  for (let i = 0; i < state.filters.length; i++) {\r\n    const f = state.filters[i];\r\n    if (!f.field || !f.op) continue;\r\n    let part;\r\n    const field = quoteIdentifier(f.field);\r\n    const op = f.op.toUpperCase();\r\n    if (op === 'IS NULL' || op === 'IS NOT NULL') {\r\n      part = `${field} ${op}`;\r\n    } else if (op === 'IN') {\r\n      part = `${field} IN ${literal(f.value)}`;\r\n    } else if (op === 'BETWEEN') {\r\n      const [a,b] = ('' + (f.value || '')).split(',');\r\n      part = `${field} BETWEEN ${literal(a)} AND ${literal(b)}`;\r\n    } else if (op === 'LIKE') {\r\n      part = `${field} LIKE ${literal(f.value)}`;\r\n    } else {\r\n      part = `${field} ${op} ${literal(f.value)}`;\r\n    }\r\n    if (part) {\r\n      whereParts.push(part);\r\n      const logic = (f.logic || 'AND').toUpperCase();\r\n      if (i < state.filters.length - 1) whereParts.push(logic);\r\n    }\r\n  }\r\n\r\n  const groupStr = state.groupBy.length ? ('\\nGROUP BY ' + state.groupBy.map(quoteIdentifier).join(', ')) : '';\r\n  const orderStr = state.orderBy.length ? ('\\nORDER BY ' + state.orderBy.map(o => `${quoteIdentifier(o.field)} ${o.dir || 'ASC'}`).join(', ')) : '';\r\n  const limitStr = (state.limit != null && state.limit !== '') ? ('\\nLIMIT ' + Number(state.limit)) : '';\r\n  const offsetStr = (state.offset != null && state.offset !== '') ? ('\\nOFFSET ' + Number(state.offset)) : '';\r\n\r\n  let sql = `SELECT\\n  ${selectParts.join(',\\n  ')}\\nFROM ${fromTable}`;\r\n  if (joinParts.length) sql += '\\n' + joinParts.join('\\n');\r\n  if (whereParts.length) sql += '\\nWHERE ' + whereParts.join(' ');\r\n  sql += groupStr + orderStr + limitStr + offsetStr;\r\n\r\n  return sql;\r\n}\r\n\r\nfunction buildCTESQL(cte) {\r\n  // CTE теперь содержит массив подзапросов для UNION\r\n  const cteQueries = cte.queries || [];\r\n  if (cteQueries.length === 0) return '';\r\n  \r\n  const queryParts = [];\r\n  for (let i = 0; i < cteQueries.length; i++) {\r\n    const q = cteQueries[i];\r\n    const sql = buildSingleSQL(q);\r\n    if (i === 0) queryParts.push(sql);\r\n    else queryParts.push(`${q.unionAllNext ? 'UNION ALL' : 'UNION'}\\n${sql}`);\r\n  }\r\n  \r\n  return queryParts.join('\\n');\r\n}\r\n\r\nexport function buildSQLFromQueries(queries, ctes = []) {\r\n  const parts = [];\r\n  \r\n  // Добавляем CTE в начало если они есть\r\n  if (ctes && ctes.length > 0) {\r\n    const cteParts = ctes.map(cte => {\r\n      const cteSQL = buildCTESQL(cte);\r\n      return `${cte.name} AS (\\n${cteSQL.split('\\n').map(line => '  ' + line).join('\\n')}\\n)`;\r\n    });\r\n    parts.push(`WITH ${cteParts.join(',\\n')}\\n`);\r\n  }\r\n  \r\n  // Добавляем основные запросы\r\n  for (let i = 0; i < queries.length; i++) {\r\n    const q = queries[i];\r\n    const sql = buildSingleSQL(q);\r\n    if (i === 0) parts.push(sql);\r\n    else parts.push(`\\n${q.unionAllNext ? 'UNION ALL' : 'UNION'}\\n${sql}`);\r\n  }\r\n  \r\n  return parts.join('');\r\n}\r\n\r\n\r\n","// Продвинутый SQL парсер с поддержкой CTE, UNION, всех типов JOIN и условий\r\n\r\nexport function parseCompleteSQL(sqlText) {\r\n  if (!sqlText || typeof sqlText !== 'string') {\r\n    throw new Error('SQL текст должен быть строкой');\r\n  }\r\n\r\n  // Очищаем SQL от лишних пробелов и переносов, сохраняя структуру\r\n  const cleanSQL = sqlText.trim().replace(/\\s+/g, ' ');\r\n  console.log('Очищенный SQL:', cleanSQL);\r\n  \r\n  const result = {\r\n    ctes: [],\r\n    queries: []\r\n  };\r\n\r\n  try {\r\n    // Разделяем на CTE и основные запросы\r\n    const { ctesPart, mainQueryPart } = separateCTEsFromMain(cleanSQL);\r\n    console.log('CTE часть:', ctesPart);\r\n    console.log('Основная часть:', mainQueryPart);\r\n    \r\n    // Парсим CTE если есть\r\n    if (ctesPart) {\r\n      result.ctes = parseCTEs(ctesPart);\r\n      console.log('Парсированные CTE:', result.ctes);\r\n    }\r\n    \r\n    // Парсим основные запросы (могут быть объединены UNION)\r\n    if (mainQueryPart) {\r\n      result.queries = parseMainQueries(mainQueryPart);\r\n      console.log('Парсированные запросы:', result.queries);\r\n    }\r\n    \r\n    return result;\r\n  } catch (error) {\r\n    console.error('Ошибка в parseCompleteSQL:', error);\r\n    throw new Error(`Ошибка парсинга SQL: ${error.message}`);\r\n  }\r\n}\r\n\r\nfunction separateCTEsFromMain(sql) {\r\n  // Ищем WITH clause в начале запроса\r\n  const withRegex = /^WITH\\s+/i;\r\n  \r\n  if (!withRegex.test(sql)) {\r\n    return { ctesPart: null, mainQueryPart: sql };\r\n  }\r\n  \r\n  // Более точный поиск границы между CTE и основным запросом\r\n  let depth = 0;\r\n  let inQuotes = false;\r\n  let quoteChar = '';\r\n  let i = 5; // Начинаем после \"WITH \"\r\n  \r\n  // Пропускаем пробелы после WITH\r\n  while (i < sql.length && /\\s/.test(sql[i])) i++;\r\n  \r\n  // Ищем конец CTE блока\r\n  while (i < sql.length) {\r\n    const char = sql[i];\r\n    const prevChar = i > 0 ? sql[i - 1] : '';\r\n    \r\n    // Обрабатываем кавычки\r\n    if ((char === '\"' || char === \"'\") && prevChar !== '\\\\') {\r\n      if (!inQuotes) {\r\n        inQuotes = true;\r\n        quoteChar = char;\r\n      } else if (char === quoteChar) {\r\n        inQuotes = false;\r\n        quoteChar = '';\r\n      }\r\n    }\r\n    \r\n    if (!inQuotes) {\r\n      if (char === '(') {\r\n        depth++;\r\n      } else if (char === ')') {\r\n        depth--;\r\n      } else if (depth === 0) {\r\n        // Проверяем на SELECT вне скобок (начало основного запроса)\r\n        const remaining = sql.substring(i);\r\n        if (/^\\s*SELECT\\s+/i.test(remaining)) {\r\n          const ctesPart = sql.substring(5, i).trim(); // 5 = \"WITH \".length\r\n          const mainQueryPart = remaining.trim();\r\n          return { ctesPart, mainQueryPart };\r\n        }\r\n      }\r\n    }\r\n    \r\n    i++;\r\n  }\r\n  \r\n  // Если не нашли SELECT, возможно весь запрос - это CTE\r\n  return { ctesPart: sql.substring(5).trim(), mainQueryPart: '' };\r\n}\r\n\r\nfunction parseCTEs(ctesText) {\r\n  const ctes = [];\r\n  \r\n  // Разбиваем CTE по запятым (учитывая вложенные скобки)\r\n  const cteDefinitions = splitCTEDefinitions(ctesText);\r\n  \r\n  cteDefinitions.forEach(cteDef => {\r\n    const cte = parseSingleCTE(cteDef.trim());\r\n    if (cte) {\r\n      ctes.push(cte);\r\n    }\r\n  });\r\n  \r\n  return ctes;\r\n}\r\n\r\nfunction splitCTEDefinitions(text) {\r\n  const definitions = [];\r\n  let current = '';\r\n  let parenthesesLevel = 0;\r\n  let inQuotes = false;\r\n  let quoteChar = '';\r\n\r\n  for (let i = 0; i < text.length; i++) {\r\n    const char = text[i];\r\n    const prevChar = i > 0 ? text[i - 1] : '';\r\n    \r\n    // Обрабатываем кавычки\r\n    if ((char === '\"' || char === \"'\") && prevChar !== '\\\\') {\r\n      if (!inQuotes) {\r\n        inQuotes = true;\r\n        quoteChar = char;\r\n      } else if (char === quoteChar) {\r\n        inQuotes = false;\r\n        quoteChar = '';\r\n      }\r\n    }\r\n    \r\n    if (!inQuotes) {\r\n      if (char === '(') {\r\n        parenthesesLevel++;\r\n      } else if (char === ')') {\r\n        parenthesesLevel--;\r\n      } else if (char === ',' && parenthesesLevel === 0) {\r\n        definitions.push(current.trim());\r\n        current = '';\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    current += char;\r\n  }\r\n  \r\n  if (current.trim()) {\r\n    definitions.push(current.trim());\r\n  }\r\n  \r\n  return definitions;\r\n}\r\n\r\nfunction parseSingleCTE(cteText) {\r\n  // Формат: cte_name AS (SELECT ... UNION SELECT ...)\r\n  const cteMatch = cteText.match(/^(\\w+)\\s+AS\\s+\\((.+)\\)$/i);\r\n  if (!cteMatch) return null;\r\n  \r\n  const cteName = cteMatch[1];\r\n  const cteBody = cteMatch[2];\r\n  \r\n  // Парсим подзапросы внутри CTE (могут быть объединены UNION)\r\n  const queries = parseUnionQueries(cteBody);\r\n  \r\n  return {\r\n    name: cteName,\r\n    isCTE: true,\r\n    queries: queries,\r\n    currentQueryIndex: 0\r\n  };\r\n}\r\n\r\nfunction parseMainQueries(mainQueryText) {\r\n  // Основные запросы тоже могут быть объединены UNION\r\n  return parseUnionQueries(mainQueryText);\r\n}\r\n\r\nfunction parseUnionQueries(queryText) {\r\n  const queries = [];\r\n  \r\n  // Разбиваем по UNION (учитывая UNION ALL)\r\n  const unionParts = splitByUnion(queryText);\r\n  \r\n  unionParts.forEach((part, index) => {\r\n    const query = parseSelectQuery(part.query);\r\n    if (query) {\r\n      // Добавляем информацию о UNION\r\n      query.unionAllNext = part.isUnionAll;\r\n      query.name = `Запрос ${index + 1}`;\r\n      queries.push(query);\r\n    }\r\n  });\r\n  \r\n  return queries;\r\n}\r\n\r\nfunction splitByUnion(text) {\r\n  const parts = [];\r\n  \r\n  // Более точное разбиение с учетом скобок\r\n  let currentQuery = '';\r\n  let depth = 0;\r\n  let inQuotes = false;\r\n  let quoteChar = '';\r\n  let i = 0;\r\n  \r\n  while (i < text.length) {\r\n    const char = text[i];\r\n    const prevChar = i > 0 ? text[i - 1] : '';\r\n    \r\n    // Обрабатываем кавычки\r\n    if ((char === '\"' || char === \"'\") && prevChar !== '\\\\') {\r\n      if (!inQuotes) {\r\n        inQuotes = true;\r\n        quoteChar = char;\r\n      } else if (char === quoteChar) {\r\n        inQuotes = false;\r\n        quoteChar = '';\r\n      }\r\n    }\r\n    \r\n    if (!inQuotes) {\r\n      if (char === '(') {\r\n        depth++;\r\n      } else if (char === ')') {\r\n        depth--;\r\n      } else if (depth === 0) {\r\n        // Ищем UNION на верхнем уровне\r\n        const remaining = text.substring(i);\r\n        const unionMatch = remaining.match(/^\\s*UNION(\\s+ALL)?\\s+/i);\r\n        \r\n        if (unionMatch) {\r\n          // Найден UNION\r\n          const isUnionAll = !!unionMatch[1];\r\n          \r\n          if (currentQuery.trim()) {\r\n            parts.push({\r\n              query: currentQuery.trim(),\r\n              isUnionAll: false // UNION относится к следующему запросу\r\n            });\r\n          }\r\n          \r\n          currentQuery = '';\r\n          i += unionMatch[0].length;\r\n          \r\n          // Следующий запрос будет помечен как UNION\r\n          if (parts.length === 0) {\r\n            // Это не должно происходить, но на всякий случай\r\n            parts.push({\r\n              query: '',\r\n              isUnionAll: false\r\n            });\r\n          }\r\n          \r\n          // Запоминаем что следующий запрос имеет UNION\r\n          const nextQueryStartsWithUnion = { isUnionAll };\r\n          \r\n          // Читаем следующий запрос\r\n          let nextQuery = '';\r\n          while (i < text.length) {\r\n            const nextChar = text[i];\r\n            const nextRemaining = text.substring(i);\r\n            const nextUnionMatch = nextRemaining.match(/^\\s*UNION(\\s+ALL)?\\s+/i);\r\n            \r\n            if (nextUnionMatch && depth === 0 && !inQuotes) {\r\n              // Найден следующий UNION\r\n              break;\r\n            }\r\n            \r\n            if (nextChar === '(' && !inQuotes) depth++;\r\n            else if (nextChar === ')' && !inQuotes) depth--;\r\n            else if ((nextChar === '\"' || nextChar === \"'\") && text[i-1] !== '\\\\') {\r\n              if (!inQuotes) {\r\n                inQuotes = true;\r\n                quoteChar = nextChar;\r\n              } else if (nextChar === quoteChar) {\r\n                inQuotes = false;\r\n                quoteChar = '';\r\n              }\r\n            }\r\n            \r\n            nextQuery += nextChar;\r\n            i++;\r\n          }\r\n          \r\n          if (nextQuery.trim()) {\r\n            parts.push({\r\n              query: nextQuery.trim(),\r\n              isUnionAll: nextQueryStartsWithUnion.isUnionAll\r\n            });\r\n          }\r\n          \r\n          currentQuery = '';\r\n          continue;\r\n        }\r\n      }\r\n    }\r\n    \r\n    currentQuery += char;\r\n    i++;\r\n  }\r\n  \r\n  // Добавляем последнюю часть\r\n  if (currentQuery.trim()) {\r\n    parts.push({\r\n      query: currentQuery.trim(),\r\n      isUnionAll: false\r\n    });\r\n  }\r\n  \r\n  // Если нет частей, добавляем весь текст\r\n  if (parts.length === 0 && text.trim()) {\r\n    parts.push({\r\n      query: text.trim(),\r\n      isUnionAll: false\r\n    });\r\n  }\r\n  \r\n  return parts;\r\n}\r\n\r\nfunction parseSelectQuery(queryText) {\r\n  console.log('Парсим SELECT запрос:', queryText);\r\n  \r\n  const query = {\r\n    name: '',\r\n    selectedTables: [],\r\n    fields: [],\r\n    joins: [],\r\n    filters: [],\r\n    groupBy: [],\r\n    orderBy: [],\r\n    limit: null,\r\n    offset: null,\r\n    unionAllNext: false,\r\n    groupByInput: '',\r\n    orderByInput: { field: '', dir: 'ASC' }\r\n  };\r\n\r\n  try {\r\n    // Разбиваем запрос на основные части\r\n    const parts = splitQueryIntoParts(queryText);\r\n    console.log('Части запроса:', parts);\r\n    \r\n    // Парсим каждую часть\r\n    if (parts.select) {\r\n      console.log('Парсим SELECT:', parts.select);\r\n      parseSelectClause(parts.select, query);\r\n    }\r\n    if (parts.from) {\r\n      console.log('Парсим FROM:', parts.from);\r\n      parseFromClause(parts.from, query);\r\n    }\r\n    if (parts.joins) {\r\n      console.log('Парсим JOIN:', parts.joins);\r\n      parseJoins(parts.joins, query);\r\n    }\r\n    if (parts.where) {\r\n      console.log('Парсим WHERE:', parts.where);\r\n      parseWhereClause(parts.where, query);\r\n    }\r\n    if (parts.groupBy) {\r\n      console.log('Парсим GROUP BY:', parts.groupBy);\r\n      parseGroupByClause(parts.groupBy, query);\r\n    }\r\n    if (parts.orderBy) {\r\n      console.log('Парсим ORDER BY:', parts.orderBy);\r\n      parseOrderByClause(parts.orderBy, query);\r\n    }\r\n    if (parts.limit) {\r\n      console.log('Парсим LIMIT:', parts.limit);\r\n      parseLimitClause(parts.limit, query);\r\n    }\r\n\r\n    console.log('Итоговый запрос:', query);\r\n    return query;\r\n  } catch (error) {\r\n    console.error('Ошибка парсинга SELECT запроса:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\nfunction splitQueryIntoParts(sql) {\r\n  const parts = {};\r\n  console.log('Разбираем SQL на части:', sql);\r\n  \r\n  // Более точное разбиение SQL на части\r\n  const selectMatch = sql.match(/SELECT\\s+(.*?)(?:\\s+FROM|$)/is);\r\n  \r\n  // Для FROM ищем до первого JOIN или других ключевых слов\r\n  const fromMatch = sql.match(/FROM\\s+(.*?)(?:\\s+(?:(?:LEFT|RIGHT|INNER|FULL)?\\s*JOIN|WHERE|GROUP\\s+BY|ORDER\\s+BY|LIMIT)|$)/is);\r\n  \r\n  // Упрощенный и более надежный поиск JOIN\r\n  const joinMatches = [];\r\n  \r\n  // Ищем все JOIN пошагово\r\n  let searchStart = 0;\r\n  while (true) {\r\n    // Ищем следующий JOIN\r\n    const joinIndex = sql.substring(searchStart).search(/\\b(?:LEFT|RIGHT|INNER|FULL)?\\s*JOIN\\b/i);\r\n    if (joinIndex === -1) break;\r\n    \r\n    const actualJoinIndex = searchStart + joinIndex;\r\n    const joinStart = actualJoinIndex;\r\n    \r\n    // Находим конец этого JOIN (до следующего JOIN, WHERE, GROUP BY, ORDER BY, LIMIT)\r\n    let joinEnd = joinStart;\r\n    let depth = 0;\r\n    let inQuotes = false;\r\n    let quoteChar = '';\r\n    \r\n    // Ищем ON после JOIN\r\n    const onMatch = sql.substring(joinStart).match(/\\bJOIN\\s+\\w+\\s+ON\\b/i);\r\n    if (!onMatch) {\r\n      searchStart = joinStart + 1;\r\n      continue;\r\n    }\r\n    \r\n    joinEnd = joinStart + onMatch.index + onMatch[0].length;\r\n    \r\n    // Продолжаем искать конец ON условия\r\n    while (joinEnd < sql.length) {\r\n      const char = sql[joinEnd];\r\n      const prevChar = joinEnd > 0 ? sql[joinEnd - 1] : '';\r\n      \r\n      // Обрабатываем кавычки\r\n      if ((char === '\"' || char === \"'\") && prevChar !== '\\\\') {\r\n        if (!inQuotes) {\r\n          inQuotes = true;\r\n          quoteChar = char;\r\n        } else if (char === quoteChar) {\r\n          inQuotes = false;\r\n          quoteChar = '';\r\n        }\r\n      }\r\n      \r\n      if (!inQuotes) {\r\n        if (char === '(') {\r\n          depth++;\r\n        } else if (char === ')') {\r\n          depth--;\r\n        } else if (depth === 0) {\r\n          // Проверяем на ключевые слова\r\n          const remaining = sql.substring(joinEnd);\r\n          if (/^\\s*(?:LEFT|RIGHT|INNER|FULL)?\\s*JOIN\\b/i.test(remaining) ||\r\n              /^\\s*WHERE\\b/i.test(remaining) ||\r\n              /^\\s*GROUP\\s+BY\\b/i.test(remaining) ||\r\n              /^\\s*ORDER\\s+BY\\b/i.test(remaining) ||\r\n              /^\\s*LIMIT\\b/i.test(remaining)) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      \r\n      joinEnd++;\r\n    }\r\n    \r\n    const joinClause = sql.substring(joinStart, joinEnd).trim();\r\n    if (joinClause) {\r\n      joinMatches.push(joinClause);\r\n      console.log('Найден JOIN:', joinClause);\r\n    }\r\n    \r\n    searchStart = joinEnd;\r\n  }\r\n  \r\n  const whereMatch = sql.match(/WHERE\\s+(.*?)(?:\\s+(?:GROUP\\s+BY|ORDER\\s+BY|LIMIT)|$)/is);\r\n  const groupByMatch = sql.match(/GROUP\\s+BY\\s+(.*?)(?:\\s+(?:ORDER\\s+BY|LIMIT)|$)/is);\r\n  const orderByMatch = sql.match(/ORDER\\s+BY\\s+(.*?)(?:\\s+LIMIT|$)/is);\r\n  const limitMatch = sql.match(/LIMIT\\s+(\\d+)(?:\\s+OFFSET\\s+(\\d+))?/i);\r\n\r\n  if (selectMatch) parts.select = selectMatch[1].trim();\r\n  if (fromMatch) parts.from = fromMatch[1].trim();\r\n  if (joinMatches.length > 0) parts.joins = joinMatches;\r\n  if (whereMatch) parts.where = whereMatch[1].trim();\r\n  if (groupByMatch) parts.groupBy = groupByMatch[1].trim();\r\n  if (orderByMatch) parts.orderBy = orderByMatch[1].trim();\r\n  if (limitMatch) parts.limit = limitMatch[0].trim();\r\n\r\n  console.log('Результат разбора:', parts);\r\n  return parts;\r\n}\r\n\r\nfunction parseSelectClause(selectText, query) {\r\n  // Разбиваем поля по запятым (учитывая возможные функции)\r\n  const fields = splitByCommaRespectingParentheses(selectText);\r\n  \r\n  fields.forEach(fieldText => {\r\n    const field = parseField(fieldText.trim());\r\n    if (field) {\r\n      query.fields.push(field);\r\n    }\r\n  });\r\n}\r\n\r\nfunction parseField(fieldText) {\r\n  console.log('Парсим поле:', fieldText);\r\n  \r\n  const field = {\r\n    table: null,\r\n    name: 'custom_field',\r\n    alias: '',\r\n    agg: '',\r\n    expression: fieldText\r\n  };\r\n\r\n  let workingText = fieldText;\r\n\r\n  // Проверяем на алиас (AS keyword или просто пробел)\r\n  const aliasMatch = workingText.match(/^(.+?)\\s+(?:AS\\s+)?(\\w+)$/i);\r\n  if (aliasMatch) {\r\n    field.expression = aliasMatch[1].trim();\r\n    field.alias = aliasMatch[2];\r\n    workingText = aliasMatch[1].trim();\r\n  }\r\n\r\n  // Проверяем на агрегатные функции\r\n  const aggMatch = workingText.match(/^(COUNT|SUM|AVG|MIN|MAX)\\s*\\(/i);\r\n  if (aggMatch) {\r\n    // Устанавливаем тип агрегации в выпадашке и используем внутреннее выражение как expression\r\n    field.agg = aggMatch[1].toUpperCase();\r\n\r\n    // Извлекаем содержимое функции для определения table.field или '*'\r\n    const innerField = workingText.match(/\\((.+)\\)/);\r\n    if (innerField) {\r\n      const innerTextRaw = innerField[1].trim();\r\n      // Уберём возможные завершающие скобки от лишних пробелов\r\n      const innerText = innerTextRaw.replace(/\\)\\s*$/,'').trim();\r\n\r\n      // Сохраняем внутреннее выражение в поле expression, чтобы UI показывал чистое выражение\r\n      field.expression = innerText;\r\n\r\n      if (innerText === '*') {\r\n        field.table = null;\r\n        field.name = '*';\r\n      } else {\r\n        // Проверяем на table.field внутри агрегатной функции\r\n        const tableFieldMatch = innerText.match(/^(\\w+)\\.(\\w+)$/);\r\n        if (tableFieldMatch) {\r\n          field.table = tableFieldMatch[1];\r\n          field.name = tableFieldMatch[2];\r\n        } else if (!innerText.includes('(')) {\r\n          field.name = innerText;\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    // Если нет агрегатной функции, парсим как обычное поле\r\n    const tableFieldMatch = workingText.match(/^(\\w+)\\.(\\w+)$/);\r\n    if (tableFieldMatch) {\r\n      field.table = tableFieldMatch[1];\r\n      field.name = tableFieldMatch[2];\r\n    } else if (workingText !== '*' && !workingText.includes('(')) {\r\n      field.name = workingText;\r\n    }\r\n  }\r\n\r\n  console.log('Результат парсинга поля:', field);\r\n  return field;\r\n}\r\n\r\nfunction parseFromClause(fromText, query) {\r\n  // Простой парсинг FROM - берем первую таблицу\r\n  const tableName = fromText.split(/\\s+/)[0];\r\n  if (tableName) {\r\n    query.selectedTables.push(tableName);\r\n  }\r\n}\r\n\r\nfunction parseJoins(joinTexts, query) {\r\n  console.log('Парсим JOIN тексты:', joinTexts);\r\n  joinTexts.forEach(joinText => {\r\n    const join = parseJoin(joinText);\r\n    if (join) {\r\n      query.joins.push(join);\r\n      console.log('Добавлен JOIN в запрос:', join);\r\n    } else {\r\n      console.log('Не удалось распарсить JOIN:', joinText);\r\n    }\r\n  });\r\n  console.log('Итоговые JOIN в запросе:', query.joins);\r\n}\r\n\r\nfunction parseJoin(joinText) {\r\n  console.log('Парсим JOIN:', joinText);\r\n  \r\n  // Парсим JOIN: LEFT JOIN table ON condition\r\n  const joinMatch = joinText.match(/^(LEFT|RIGHT|INNER|FULL)?\\s*JOIN\\s+(\\w+)\\s+ON\\s+(.+)$/i);\r\n  if (!joinMatch) {\r\n    console.log('Не удалось распарсить JOIN:', joinText);\r\n    return null;\r\n  }\r\n\r\n  console.log('Найденные группы в JOIN:', joinMatch);\r\n\r\n  const join = {\r\n    type: (joinMatch[1] || 'INNER').toUpperCase(),\r\n    rightTable: joinMatch[2],\r\n    on: []\r\n  };\r\n\r\n  console.log('Создан JOIN объект:', join);\r\n\r\n  // Парсим условия ON\r\n  const conditions = splitByLogicalOperators(joinMatch[3]);\r\n  console.log('Условия ON:', conditions);\r\n  \r\n  conditions.forEach(conditionObj => {\r\n    const condMatch = conditionObj.condition.trim().match(/^(.+?)\\s*(=|!=|>|<|>=|<=)\\s*(.+)$/);\r\n    if (condMatch) {\r\n      join.on.push({\r\n        left: condMatch[1].trim(),\r\n        op: condMatch[2],\r\n        right: condMatch[3].trim()\r\n      });\r\n    }\r\n  });\r\n\r\n  console.log('Итоговый JOIN:', join);\r\n  return join;\r\n}\r\n\r\nfunction parseWhereClause(whereText, query) {\r\n  // Парсинг WHERE - разбиваем по AND/OR\r\n  const conditions = splitByLogicalOperators(whereText);\r\n  \r\n  conditions.forEach((conditionObj, index) => {\r\n    const filter = parseCondition(conditionObj.condition);\r\n    if (filter) {\r\n      filter.logic = index < conditions.length - 1 ? conditionObj.nextOperator : 'AND';\r\n      query.filters.push(filter);\r\n    }\r\n  });\r\n}\r\n\r\nfunction parseCondition(conditionText) {\r\n  const condMatch = conditionText.trim().match(/^(.+?)\\s*(=|!=|>|<|>=|<=|LIKE|IN|BETWEEN|IS\\s+NULL|IS\\s+NOT\\s+NULL)\\s*(.*)$/i);\r\n  if (!condMatch) return null;\r\n\r\n  return {\r\n    field: condMatch[1].trim(),\r\n    op: condMatch[2].toUpperCase().replace(/\\s+/g, ' '),\r\n    value: condMatch[3] ? condMatch[3].trim() : '',\r\n    logic: 'AND'\r\n  };\r\n}\r\n\r\nfunction parseGroupByClause(groupByText, query) {\r\n  const fields = splitByCommaRespectingParentheses(groupByText);\r\n  query.groupBy = fields.map(f => f.trim());\r\n}\r\n\r\nfunction parseOrderByClause(orderByText, query) {\r\n  const fields = splitByCommaRespectingParentheses(orderByText);\r\n  fields.forEach(fieldText => {\r\n    const orderMatch = fieldText.trim().match(/^(.+?)\\s+(ASC|DESC)$/i);\r\n    if (orderMatch) {\r\n      query.orderBy.push({\r\n        field: orderMatch[1].trim(),\r\n        dir: orderMatch[2].toUpperCase()\r\n      });\r\n    } else {\r\n      query.orderBy.push({\r\n        field: fieldText.trim(),\r\n        dir: 'ASC'\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\nfunction parseLimitClause(limitText, query) {\r\n  const limitMatch = limitText.match(/LIMIT\\s+(\\d+)(?:\\s+OFFSET\\s+(\\d+))?/i);\r\n  if (limitMatch) {\r\n    query.limit = parseInt(limitMatch[1]);\r\n    if (limitMatch[2]) {\r\n      query.offset = parseInt(limitMatch[2]);\r\n    }\r\n  }\r\n}\r\n\r\n// Утилитарные функции\r\nfunction splitByCommaRespectingParentheses(text) {\r\n  const result = [];\r\n  let current = '';\r\n  let parenthesesLevel = 0;\r\n  let inQuotes = false;\r\n  let quoteChar = '';\r\n\r\n  for (let i = 0; i < text.length; i++) {\r\n    const char = text[i];\r\n    const prevChar = i > 0 ? text[i - 1] : '';\r\n    \r\n    // Обрабатываем кавычки\r\n    if ((char === '\"' || char === \"'\") && prevChar !== '\\\\') {\r\n      if (!inQuotes) {\r\n        inQuotes = true;\r\n        quoteChar = char;\r\n      } else if (char === quoteChar) {\r\n        inQuotes = false;\r\n        quoteChar = '';\r\n      }\r\n    }\r\n    \r\n    if (!inQuotes) {\r\n      if (char === '(') {\r\n        parenthesesLevel++;\r\n      } else if (char === ')') {\r\n        parenthesesLevel--;\r\n      } else if (char === ',' && parenthesesLevel === 0) {\r\n        result.push(current.trim());\r\n        current = '';\r\n        continue;\r\n      }\r\n    }\r\n    \r\n    current += char;\r\n  }\r\n  \r\n  if (current.trim()) {\r\n    result.push(current.trim());\r\n  }\r\n  \r\n  return result;\r\n}\r\n\r\nfunction splitByLogicalOperators(text) {\r\n  const result = [];\r\n  const tokens = text.split(/\\s+(AND|OR)\\s+/i);\r\n  \r\n  for (let i = 0; i < tokens.length; i += 2) {\r\n    const condition = tokens[i];\r\n    const nextOperator = tokens[i + 1] || 'AND';\r\n    result.push({\r\n      condition: condition.trim(),\r\n      nextOperator: nextOperator.toUpperCase()\r\n    });\r\n  }\r\n  \r\n  return result;\r\n}\r\n","<template>\r\n  <div class=\"app\">\r\n    <aside class=\"sidebar\">\r\n      <div style=\"margin-bottom:10px;\">\r\n        <strong>Схема БД</strong>\r\n      </div>\r\n      <div class=\"list\">\r\n        <div v-for=\"table in extendedSchema.tables\" :key=\"table.name\" class=\"panel\" style=\"padding:8px;\">\r\n          <div class=\"row\" style=\"justify-content:space-between; cursor:pointer;\" @click=\"toggleExpand(table.name)\">\r\n            <div>\r\n              <strong>{{ table.name }}</strong>\r\n              <span v-if=\"table.isCTE\" class=\"chip\" style=\"font-size: 10px; margin-left: 4px;\">CTE</span>\r\n              <span class=\"muted\"> ({{ table.fields.length }})</span>\r\n            </div>\r\n            <span class=\"muted\">{{ isExpanded(table.name) ? '−' : '+' }}</span>\r\n          </div>\r\n          <div v-if=\"isExpanded(table.name)\" class=\"list\" style=\"margin-top:6px;\">\r\n            <button v-for=\"f in table.fields\" :key=\"table.name + '.' + f.name\" class=\"chip\"\r\n              @click.stop=\"addFieldFromSidebar(table.name, f.name)\">\r\n              {{ table.name }}.{{ f.name }}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <p class=\"muted\">Совет: раскройте таблицу и нажмите на нужное поле</p>\r\n    </aside>\r\n\r\n    <section class=\"content\">\r\n      <div class=\"toolbar\">\r\n        <h1>SQL Конструктор</h1>\r\n        <div class=\"spacer\"></div>\r\n        <button class=\"primary\" @click=\"copySQL\">Копировать SQL</button>\r\n      </div>\r\n      <!-- CTE вкладки -->\r\n      <div class=\"tabs-bar\">\r\n        <div class=\"row\" style=\"flex-wrap:nowrap; gap:8px; align-items:center; min-width:0;\">\r\n          <div class=\"row\" style=\"gap:8px; overflow-x:auto; flex-shrink:1; min-width:0;\">\r\n            <div class=\"chip\" :class=\"{active: store.currentCTEIndex === -1}\" @click=\"selectCTE(-1)\" style=\"user-select:none;\">\r\n              Основной запрос\r\n            </div>\r\n            <div v-for=\"(cte, idx) in store.ctes\" :key=\"'cte-' + idx\" class=\"chip\" :class=\"{active: idx === store.currentCTEIndex}\" @click=\"selectCTE(idx)\" style=\"user-select:none;\">\r\n              {{ cte.name }}\r\n            </div>\r\n          </div>\r\n          <button class=\"success\" @click=\"addCTE\" style=\"flex-shrink:0;\">+ Добавить CTE</button>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Обычные вкладки запросов (только когда выбран основной запрос) -->\r\n      <div v-if=\"store.currentCTEIndex === -1\" class=\"tabs-bar\">\r\n        <div class=\"row\" style=\"flex-wrap:nowrap; gap:8px; align-items:center; min-width:0;\">\r\n          <div class=\"row\" style=\"gap:8px; overflow-x:auto; flex-shrink:1; min-width:0;\">\r\n            <div v-for=\"(q, idx) in store.queries\" :key=\"idx\" class=\"chip\" :class=\"{active: idx === store.currentQueryIndex}\" @click=\"selectQuery(idx)\" style=\"user-select:none;\">\r\n              {{ q.name || ('Запрос ' + (idx+1)) }}\r\n            </div>\r\n          </div>\r\n          <button class=\"success\" @click=\"addQuery\" style=\"flex-shrink:0;\">+ Добавить запрос</button>\r\n          <label v-if=\"store.currentQueryIndex > 0\" style=\"display:flex; align-items:center; gap:6px; white-space:nowrap; flex-shrink:0;\">\r\n            UNION ALL: <input type=\"checkbox\" v-model=\"current.unionAllNext\" />\r\n          </label>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Вкладки подзапросов CTE (только когда выбрана CTE) -->\r\n      <div v-if=\"store.currentCTEIndex >= 0 && currentCTE\" class=\"tabs-bar\">\r\n        <div class=\"row\" style=\"flex-wrap:nowrap; gap:8px; align-items:center; min-width:0;\">\r\n          <div class=\"row\" style=\"gap:8px; overflow-x:auto; flex-shrink:1; min-width:0;\">\r\n            <div v-for=\"(q, idx) in currentCTE.queries\" :key=\"'cte-query-' + idx\" class=\"chip\" :class=\"{active: idx === currentCTE.currentQueryIndex}\" @click=\"selectCTEQuery(idx)\" style=\"user-select:none;\">\r\n              {{ q.name || ('Подзапрос ' + (idx+1)) }}\r\n            </div>\r\n          </div>\r\n          <button class=\"success\" @click=\"addCTEQuery\" style=\"flex-shrink:0;\">+ Добавить подзапрос</button>\r\n          <label v-if=\"currentCTE && currentCTE.currentQueryIndex > 0\" style=\"display:flex; align-items:center; gap:6px; white-space:nowrap; flex-shrink:0;\">\r\n            UNION ALL: <input type=\"checkbox\" v-model=\"current.unionAllNext\" />\r\n          </label>\r\n        </div>\r\n      </div>\r\n      <datalist id=\"field-options\">\r\n        <option v-for=\"opt in availableFields\" :key=\"opt\" :value=\"opt\">{{ opt }}</option>\r\n      </datalist>\r\n\r\n      <div class=\"main\">\r\n        <div class=\"panel scroll\">\r\n          <div class=\"row\" style=\"justify-content:space-between; margin-bottom:10px;\">\r\n            <div class=\"row\" style=\"align-items:center; gap:10px;\">\r\n              <h2 style=\"margin:0;\">Выбранные поля</h2>\r\n              <div v-if=\"store.currentCTEIndex >= 0 && currentCTE && currentCTE.currentQueryIndex === 0\" class=\"row\" style=\"align-items:center; gap:6px;\">\r\n                <label>Имя CTE:</label>\r\n                <input type=\"text\" v-model=\"currentCTE.name\" placeholder=\"cte_name\" style=\"max-width:120px;\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"row\" style=\"gap:8px;\">\r\n              <button @click=\"addCustomField\">+ Добавить поле</button>\r\n              <!-- Кнопка удаления CTE -->\r\n              <button v-if=\"store.currentCTEIndex >= 0 && store.ctes.length > 0 && currentCTE && currentCTE.currentQueryIndex === 0\" @click=\"removeCTE(store.currentCTEIndex)\" class=\"danger\" title=\"Удалить CTE\">\r\n                Удалить CTE\r\n              </button>\r\n              <!-- Кнопка удаления обычного запроса -->\r\n              <button v-if=\"store.currentCTEIndex === -1 && store.queries.length > 1\" @click=\"removeQuery(store.currentQueryIndex)\" class=\"danger\" title=\"Удалить запрос\">\r\n                Удалить запрос\r\n              </button>\r\n              <!-- Кнопка удаления подзапроса CTE -->\r\n              <button v-if=\"store.currentCTEIndex >= 0 && currentCTE && currentCTE.queries.length > 1\" @click=\"removeCTEQuery(currentCTE.currentQueryIndex)\" class=\"danger\" title=\"Удалить подзапрос\">\r\n                Удалить подзапрос\r\n              </button>\r\n            </div>\r\n          </div>\r\n          <div class=\"section\">\r\n            <div v-if=\"current.fields.length === 0\" class=\"muted\">Добавьте поля из дерева слева</div>\r\n            <div v-else class=\"table\">\r\n              <div class=\"thead\">\r\n                <div>Поле</div>\r\n                <div>Алиас</div>\r\n                <div>Агрегация</div>\r\n                <div></div>\r\n              </div>\r\n              <div class=\"row\" v-for=\"(sf, idx) in current.fields\" :key=\"sf.table + '.' + sf.name\">\r\n                <div>\r\n                  <input type=\"text\" v-model=\"sf.expression\" :placeholder=\"sf.table ? (sf.table + '.' + sf.name) : 'Выражение'\" list=\"field-options\" style=\"width:100%;\" @input=\"onFieldExpressionChange(sf)\" />\r\n                </div>\r\n                <div>\r\n                  <input type=\"text\" :placeholder=\"sf.name\" v-model=\"sf.alias\" />\r\n                </div>\r\n                <div>\r\n                  <select v-model=\"sf.agg\">\r\n                    <option value=\"\">(нет)</option>\r\n                    <option>COUNT</option>\r\n                    <option>SUM</option>\r\n                    <option>AVG</option>\r\n                    <option>MIN</option>\r\n                    <option>MAX</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"row\" style=\"justify-content:space-between;\">\r\n\r\n                    <button class=\"ghost\" title=\"Вверх\" @click=\"moveFieldUp(idx)\" :disabled=\"idx===0\">▲</button>\r\n                    <button class=\"ghost\" title=\"Вниз\" @click=\"moveFieldDown(idx)\" :disabled=\"idx===current.fields.length-1\">▼</button>\r\n                    <button class=\"ghost\" title=\"Удалить\" @click=\"removeField(sf.table, sf.name)\">×</button>\r\n\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"section\">\r\n            <div class=\"row\" style=\"justify-content:space-between;\">\r\n              <h2 style=\"margin:0;\">Соединения (JOIN)</h2>\r\n              <button @click=\"addJoin\">Добавить JOIN</button>\r\n            </div>\r\n            <div class=\"list\">\r\n              <div v-if=\"current.joins.length===0\" class=\"muted\">Нет соединений</div>\r\n              <div v-for=\"(j, idx) in current.joins\" :key=\"idx\" class=\"grid-3\" style=\"align-items:end;\">\r\n                <div>\r\n                  <label>Тип</label>\r\n                  <select v-model=\"j.type\">\r\n                    <option>INNER</option>\r\n                    <option>LEFT</option>\r\n                    <option>RIGHT</option>\r\n                    <option>FULL</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label>Таблица</label>\r\n                  <select v-model=\"j.rightTable\">\r\n                    <option v-for=\"t in allTables\" :key=\"t\" :value=\"t\">{{ t }}</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"row\" style=\"gap:6px;\">\r\n                  <button class=\"ghost\" @click=\"addJoinCondition(j)\">+ Условие</button>\r\n                  <button class=\"danger\" @click=\"removeJoin(idx)\">Удалить</button>\r\n                </div>\r\n                <div class=\"grid-4\" v-for=\"(c, cIdx) in j.on\" :key=\"cIdx\" style=\"grid-column:1/-1;\">\r\n                  <div>\r\n                    <label>Левая сторона</label>\r\n                    <input type=\"text\" v-model=\"c.left\" placeholder=\"orders.user_id\" list=\"field-options\" @input=\"onFieldExpressionChange({expression: c.left})\" />\r\n                  </div>\r\n                  <div>\r\n                    <label>Оператор</label>\r\n                    <select v-model=\"c.op\">\r\n                      <option>=</option>\r\n                      <option>!=</option>\r\n                      <option>></option>\r\n                      <option><</option>\r\n                    </select>\r\n                  </div>\r\n                  <div>\r\n                    <label>Правая сторона</label>\r\n                    <input type=\"text\" v-model=\"c.right\" placeholder=\"users.id\" list=\"field-options\" @input=\"onFieldExpressionChange({expression: c.right})\" />\r\n                  </div>\r\n                  <div style=\"align-self: end;\">\r\n                    <button class=\"danger\" @click=\"removeJoinCondition(j, cIdx)\" title=\"Удалить условие\">×</button>\r\n                  </div>\r\n                </div>\r\n                <div class=\"hr\" style=\"grid-column:1/-1;\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"section\">\r\n            <div class=\"row\" style=\"justify-content:space-between;\">\r\n              <h2 style=\"margin:0;\">Условия (WHERE)</h2>\r\n              <button @click=\"addFilter\">Добавить условие</button>\r\n            </div>\r\n            <div class=\"list\">\r\n              <div v-if=\"current.filters.length===0\" class=\"muted\">Нет условий</div>\r\n              <div class=\"grid-3\" v-for=\"(f, idx) in current.filters\" :key=\"idx\" style=\"align-items:end;\">\r\n                <div>\r\n                  <label>Поле</label>\r\n                  <input type=\"text\" v-model=\"f.field\" placeholder=\"users.age\" list=\"field-options\" @input=\"onFieldExpressionChange({expression: f.field})\" />\r\n                </div>\r\n                <div>\r\n                  <label>Оператор</label>\r\n                  <select v-model=\"f.op\">\r\n                    <option>=</option>\r\n                    <option>!=</option>\r\n                    <option>></option>\r\n                    <option><</option>\r\n                    <option>>=</option>\r\n                    <option><=</option>\r\n                    <option>LIKE</option>\r\n                    <option>IN</option>\r\n                    <option>BETWEEN</option>\r\n                    <option>IS NULL</option>\r\n                    <option>IS NOT NULL</option>\r\n                  </select>\r\n                </div>\r\n                <div>\r\n                  <label>Значение</label>\r\n                  <input type=\"text\" v-model=\"f.value\" placeholder=\"30 или 'john' или (1,2)\" />\r\n                </div>\r\n                <div style=\"grid-column:1/-1; display:flex; gap:8px; align-items:center;\">\r\n                  <label>Связь со след. условием</label>\r\n                  <select v-model=\"f.logic\" style=\"width:120px;\">\r\n                    <option>AND</option>\r\n                    <option>OR</option>\r\n                  </select>\r\n                  <button class=\"danger\" style=\"margin-left:auto;\" @click=\"removeFilter(idx)\">Удалить</button>\r\n                </div>\r\n                <div class=\"hr\" style=\"grid-column:1/-1;\"></div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"section grid-2\">\r\n            <div class=\"panel\">\r\n              <h2>Группировка</h2>\r\n              <div class=\"list\">\r\n                <div class=\"row\">\r\n                  <input type=\"text\" v-model=\"current.groupByInput\" placeholder=\"users.country, users.city\" list=\"field-options\" @input=\"onFieldExpressionChange({expression: current.groupByInput})\" />\r\n                  <button @click=\"addGroup\">Добавить</button>\r\n                </div>\r\n                <div class=\"row\" style=\"flex-wrap:wrap; gap:6px;\">\r\n                  <span class=\"chip\" v-for=\"(g, idx) in current.groupBy\" :key=\"idx\">\r\n                    {{ g }} <button class=\"ghost\" @click=\"removeGroup(idx)\">×</button>\r\n                  </span>\r\n                </div>\r\n              </div>\r\n              <div class=\"hr\"></div>\r\n              <h2>Сортировка</h2>\r\n              <div class=\"list\">\r\n                <div class=\"row\">\r\n                  <input type=\"text\" v-model=\"current.orderByInput.field\" placeholder=\"users.created_at\" list=\"field-options\" @input=\"onFieldExpressionChange({expression: current.orderByInput.field})\" />\r\n                  <select v-model=\"current.orderByInput.dir\" style=\"width:120px;\">\r\n                    <option>ASC</option>\r\n                    <option>DESC</option>\r\n                  </select>\r\n                  <button @click=\"addOrder\">Добавить</button>\r\n                </div>\r\n                <div class=\"list\">\r\n                  <div class=\"row\" v-for=\"(o, idx) in current.orderBy\" :key=\"idx\" style=\"justify-content:space-between;\">\r\n                    <span>{{ o.field }} {{ o.dir }}</span>\r\n                    <button class=\"ghost\" @click=\"removeOrder(idx)\">×</button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"hr\"></div>\r\n              <h2>Лимит</h2>\r\n              <div class=\"row\">\r\n                <input type=\"number\" v-model.number=\"current.limit\" min=\"0\" placeholder=\"100\" style=\"max-width:140px;\" />\r\n                <input type=\"number\" v-model.number=\"current.offset\" min=\"0\" placeholder=\"0\" style=\"max-width:140px;\" />\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"panel scroll\" style=\"min-height:0;\">\r\n          <div class=\"row\" style=\"justify-content:space-between; align-items:center; margin-bottom:10px;\">\r\n            <h2 style=\"margin:0;\">SQL</h2>\r\n            <div class=\"row\" style=\"gap:8px;\">\r\n              <button v-if=\"isEditingSQL\" @click=\"applySQLChanges\" class=\"success\" title=\"Применить изменения\">Применить</button>\r\n              <button v-if=\"isEditingSQL\" @click=\"cancelSQLEditing\" class=\"ghost\" title=\"Отменить изменения\">Отмена</button>\r\n              <button v-if=\"!isEditingSQL\" @click=\"startSQLEditing\" class=\"ghost\" title=\"Редактировать SQL\">Редактировать</button>\r\n            </div>\r\n          </div>\r\n          <textarea \r\n            v-if=\"isEditingSQL\" \r\n            v-model=\"editableSQL\" \r\n            class=\"sql\" \r\n            style=\"resize: vertical; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; min-height:160px; white-space: pre;\">\r\n          </textarea>\r\n          <pre v-else class=\"sql\">{{ sql }}</pre>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { store, getters, mutations } from './store';\r\nimport { buildSQLFromQueries } from './utils/sql';\r\nimport { parseCompleteSQL } from './utils/advancedSqlParser';\r\n\r\nexport default {\r\n  name: 'App',\r\n  data() {\r\n    return { \r\n      store, \r\n      expanded: {},\r\n      isEditingSQL: false,\r\n      editableSQL: ''\r\n    };\r\n  },\r\n  computed: {\r\n    current() { return getters.currentItem(); }, // Теперь возвращает либо CTE, либо обычный запрос\r\n    allTables() {\r\n      const base = this.store.schema.tables.map(t => t.name);\r\n      const cteTables = this.store.ctes.map(cte => cte.name);\r\n      return Array.from(new Set([...base, ...cteTables, ...this.current.selectedTables]));\r\n    },\r\n    availableFields() {\r\n      const tables = new Set(this.current.selectedTables);\r\n      for (const f of this.current.fields) tables.add(f.table);\r\n      const options = [];\r\n      \r\n      // Добавляем поля из обычных таблиц\r\n      for (const t of this.store.schema.tables) {\r\n        if (!tables.has(t.name)) continue;\r\n        for (const f of t.fields) options.push(`${t.name}.${f.name}`);\r\n      }\r\n      \r\n      // Добавляем поля из CTE (предполагаем что все поля доступны как cte_name.*)\r\n      for (const cte of this.store.ctes) {\r\n        if (!tables.has(cte.name)) continue;\r\n        // Для CTE добавляем все поля из первого подзапроса (UNION должен иметь одинаковые поля)\r\n        const firstQuery = cte.queries && cte.queries.length > 0 ? cte.queries[0] : null;\r\n        if (firstQuery) {\r\n          for (const f of firstQuery.fields) {\r\n            const fieldName = f.alias || f.name;\r\n            options.push(`${cte.name}.${fieldName}`);\r\n          }\r\n        }\r\n      }\r\n      \r\n      return options;\r\n    },\r\n    sql() {\r\n      return buildSQLFromQueries(this.store.queries, this.store.ctes);\r\n    },\r\n    // Расширенная схема включающая CTE как виртуальные таблицы\r\n    extendedSchema() {\r\n      const cteVirtualTables = this.store.ctes.map(cte => {\r\n        // Для CTE с UNION берем поля из первого подзапроса\r\n        const firstQuery = cte.queries && cte.queries.length > 0 ? cte.queries[0] : null;\r\n        const fields = firstQuery ? firstQuery.fields.map(f => ({\r\n          name: f.alias || f.name\r\n        })) : [];\r\n        \r\n        return {\r\n          name: cte.name,\r\n          fields,\r\n          isCTE: true\r\n        };\r\n      });\r\n      \r\n      return {\r\n        tables: [...this.store.schema.tables, ...cteVirtualTables]\r\n      };\r\n    },\r\n    // Получаем текущую CTE для отображения её подзапросов\r\n    currentCTE() {\r\n      return getters.currentCTE();\r\n    }\r\n  },\r\n  methods: {\r\n    addQuery: mutations.addQuery,\r\n    removeQuery: mutations.removeQuery,\r\n    selectQuery: mutations.selectQuery,\r\n    addCTE: mutations.addCTE,\r\n    removeCTE: mutations.removeCTE,\r\n    selectCTE: mutations.selectCTE,\r\n    addCTEQuery: mutations.addCTEQuery,\r\n    removeCTEQuery: mutations.removeCTEQuery,\r\n    selectCTEQuery: mutations.selectCTEQuery,\r\n    isExpanded(t) { return !!this.expanded[t]; },\r\n    toggleExpand(t) { this.$set(this.expanded, t, !this.expanded[t]); },\r\n    \r\n    // Проверяет, есть ли таблица в FROM (первая выбранная таблица)\r\n    isTableInFrom(tableName) {\r\n      return this.current.selectedTables.length > 0 && this.current.selectedTables[0] === tableName;\r\n    },\r\n    \r\n    // Проверяет, есть ли таблица в JOIN\r\n    isTableInJoin(tableName) {\r\n      return this.current.joins.some(join => join.rightTable === tableName);\r\n    },\r\n    \r\n    // Проверяет, доступна ли таблица в запросе (в FROM или JOIN)\r\n    isTableAvailable(tableName) {\r\n      return this.isTableInFrom(tableName) || this.isTableInJoin(tableName);\r\n    },\r\n    \r\n    // Автоматически добавляет таблицу в LEFT JOIN, если её нет в FROM\r\n    ensureTableAvailable(tableName) {\r\n      if (!this.isTableAvailable(tableName)) {\r\n        // Добавляем таблицу в LEFT JOIN\r\n        this.current.joins.push({\r\n          type: 'LEFT',\r\n          rightTable: tableName,\r\n          on: []\r\n        });\r\n      }\r\n    },\r\n    \r\n    // Извлекает имена таблиц из выражения (например, \"users.name, orders.total\" -> [\"users\", \"orders\"])\r\n    extractTablesFromExpression(expression) {\r\n      if (!expression) return [];\r\n      const tablePattern = /\\b([a-zA-Z_][a-zA-Z0-9_]*)\\./g;\r\n      const tables = new Set();\r\n      let match;\r\n      while ((match = tablePattern.exec(expression)) !== null) {\r\n        tables.add(match[1]);\r\n      }\r\n      return Array.from(tables);\r\n    },\r\n    \r\n    // Обеспечивает доступность всех таблиц из выражения\r\n    ensureTablesFromExpression(expression) {\r\n      const tables = this.extractTablesFromExpression(expression);\r\n      tables.forEach(table => {\r\n        // Добавляем таблицу в selectedTables, если её там нет\r\n        if (!this.current.selectedTables.includes(table)) {\r\n          this.current.selectedTables.push(table);\r\n        }\r\n        // Добавляем в схему, если таблицы нет\r\n        if (!this.store.schema.tables.find(x => x.name === table)) {\r\n          this.store.schema.tables.push({ name: table, fields: [] });\r\n        }\r\n        // Обеспечиваем доступность таблицы в запросе\r\n        this.ensureTableAvailable(table);\r\n      });\r\n    },\r\n    \r\n    addFieldFromSidebar(table, field) {\r\n      if (!this.isFieldSelected(table, field)) {\r\n        this.current.fields.push({ \r\n          table, \r\n          name: field, \r\n          alias: '', \r\n          agg: '',\r\n          expression: `${table}.${field}`\r\n        });\r\n      }\r\n      \r\n      // Добавляем таблицу в selectedTables, если её там нет\r\n      if (!this.current.selectedTables.includes(table)) {\r\n        this.current.selectedTables.push(table);\r\n      }\r\n      \r\n      // Проверяем, доступна ли таблица в запросе, и добавляем в LEFT JOIN если нет\r\n      this.ensureTableAvailable(table);\r\n    },\r\n    isTableSelected(t) { return this.current.selectedTables.includes(t); },\r\n    // table header click now only toggles expand; selection is managed by fields\r\n    isFieldSelected(t, f) { return !!this.current.fields.find(x => x.table===t && x.name===f); },\r\n    findOrCreateField(t, f) {\r\n      let item = this.current.fields.find(x => x.table===t && x.name===f);\r\n      if (!item) { \r\n        item = { \r\n          table:t, \r\n          name:f, \r\n          alias:'', \r\n          agg:'',\r\n          expression: `${t}.${f}`\r\n        }; \r\n        this.current.fields.push(item); \r\n      }\r\n      return item;\r\n    },\r\n    removeField(t, f) {\r\n      const idx = this.current.fields.findIndex(x => x.table===t && x.name===f);\r\n      if (idx !== -1) this.current.fields.splice(idx,1);\r\n    },\r\n    moveFieldUp(i) {\r\n      if (i <= 0) return;\r\n      const arr = this.current.fields;\r\n      const tmp = arr[i-1];\r\n      this.$set(arr, i-1, arr[i]);\r\n      this.$set(arr, i, tmp);\r\n    },\r\n    moveFieldDown(i) {\r\n      const arr = this.current.fields;\r\n      if (i < 0 || i >= arr.length-1) return;\r\n      const tmp = arr[i+1];\r\n      this.$set(arr, i+1, arr[i]);\r\n      this.$set(arr, i, tmp);\r\n    },\r\n    addCustomField() {\r\n      this.current.fields.push({\r\n        table: null,\r\n        name: 'custom_field',\r\n        alias: '',\r\n        agg: '',\r\n        expression: 'NULL'\r\n      });\r\n    },\r\n    \r\n    // Обработчик изменения выражения поля\r\n    onFieldExpressionChange(field) {\r\n      if (field.expression) {\r\n        this.ensureTablesFromExpression(field.expression);\r\n      }\r\n    },\r\n    addJoin() { this.current.joins.push({ type:'INNER', rightTable:this.current.selectedTables[0] || '', on:[] }); },\r\n    removeJoin(i) { this.current.joins.splice(i,1); },\r\n    addJoinCondition(j) { j.on.push({ left:'', op:'=', right:'' }); },\r\n    removeJoinCondition(join, conditionIndex) { join.on.splice(conditionIndex, 1); },\r\n    addFilter() { this.current.filters.push({ field:'', op:'=', value:'', logic:'AND' }); },\r\n    removeFilter(i) { this.current.filters.splice(i,1); },\r\n    addGroup() {\r\n      const items = (this.current.groupByInput || '').split(',').map(s => s.trim()).filter(Boolean);\r\n      this.current.groupBy.push(...items);\r\n      this.current.groupByInput = '';\r\n    },\r\n    removeGroup(i) { this.current.groupBy.splice(i,1); },\r\n    addOrder() {\r\n      if (!this.current.orderByInput.field) return;\r\n      this.current.orderBy.push({ field:this.current.orderByInput.field, dir:this.current.orderByInput.dir || 'ASC' });\r\n      this.current.orderByInput = { field:'', dir:'ASC' };\r\n    },\r\n    removeOrder(i) { this.current.orderBy.splice(i,1); },\r\n    copySQL() {\r\n      const text = this.sql;\r\n      navigator.clipboard?.writeText(text).catch(() => {\r\n        const area = document.createElement('textarea');\r\n        area.value = text;\r\n        document.body.appendChild(area);\r\n        area.select();\r\n        document.execCommand('copy');\r\n        document.body.removeChild(area);\r\n      });\r\n    },\r\n    \r\n    // Методы для редактирования SQL\r\n    startSQLEditing() {\r\n      this.isEditingSQL = true;\r\n      this.editableSQL = this.sql;\r\n    },\r\n    \r\n    cancelSQLEditing() {\r\n      this.isEditingSQL = false;\r\n      this.editableSQL = '';\r\n    },\r\n    \r\n    applySQLChanges() {\r\n      try {\r\n        console.log('Применяем SQL:', this.editableSQL);\r\n        \r\n        // Парсим SQL и обновляем конструктор\r\n        this.parseAndApplySQL(this.editableSQL);\r\n        this.isEditingSQL = false;\r\n        this.editableSQL = '';\r\n        console.log('SQL успешно применен');\r\n      } catch (error) {\r\n        alert('Ошибка при разборе SQL: ' + error.message);\r\n        console.error('Ошибка парсинга SQL:', error);\r\n      }\r\n    },\r\n    \r\n    // Парсинг SQL и обновление всего состояния конструктора\r\n    parseAndApplySQL(sqlText) {\r\n      const parsed = parseCompleteSQL(sqlText);\r\n      console.log('Результат парсинга:', parsed);\r\n      \r\n      // Создаем резервную копию текущего состояния\r\n      const backup = {\r\n        queries: JSON.parse(JSON.stringify(this.store.queries)),\r\n        ctes: JSON.parse(JSON.stringify(this.store.ctes)),\r\n        currentQueryIndex: this.store.currentQueryIndex,\r\n        currentCTEIndex: this.store.currentCTEIndex\r\n      };\r\n      \r\n      try {\r\n        // Обновляем CTE\r\n        this.store.ctes = parsed.ctes.map(cte => ({\r\n          ...cte,\r\n          queries: cte.queries.map(query => this.normalizeQuery(query))\r\n        }));\r\n        \r\n        // Обновляем основные запросы\r\n        this.store.queries = parsed.queries.map(query => this.normalizeQuery(query));\r\n        \r\n        // Убеждаемся что есть хотя бы один запрос\r\n        if (this.store.queries.length === 0) {\r\n          this.store.queries = [this.createEmptyQuery()];\r\n        }\r\n        \r\n        // Сбрасываем индексы если они стали невалидными\r\n        if (this.store.currentQueryIndex >= this.store.queries.length) {\r\n          this.store.currentQueryIndex = 0;\r\n        }\r\n        \r\n        if (this.store.currentCTEIndex >= this.store.ctes.length) {\r\n          this.store.currentCTEIndex = -1;\r\n        }\r\n        \r\n        // Обновляем схему с новыми таблицами\r\n        this.updateSchemaFromParsedData(parsed);\r\n        \r\n      } catch (error) {\r\n        // Восстанавливаем из резервной копии при ошибке\r\n        this.store.queries = backup.queries;\r\n        this.store.ctes = backup.ctes;\r\n        this.store.currentQueryIndex = backup.currentQueryIndex;\r\n        this.store.currentCTEIndex = backup.currentCTEIndex;\r\n        throw error;\r\n      }\r\n    },\r\n    \r\n    // Нормализует запрос для соответствия ожидаемой структуре\r\n    normalizeQuery(query) {\r\n      return {\r\n        name: query.name || 'Запрос',\r\n        selectedTables: query.selectedTables || [],\r\n        fields: query.fields || [],\r\n        joins: query.joins || [],\r\n        filters: query.filters || [],\r\n        groupBy: query.groupBy || [],\r\n        orderBy: query.orderBy || [],\r\n        limit: query.limit || null,\r\n        offset: query.offset || null,\r\n        unionAllNext: query.unionAllNext || false,\r\n        groupByInput: query.groupByInput || '',\r\n        orderByInput: query.orderByInput || { field: '', dir: 'ASC' }\r\n      };\r\n    },\r\n    \r\n    // Создает пустой запрос с правильной структурой\r\n    createEmptyQuery() {\r\n      return {\r\n        name: 'Запрос',\r\n        selectedTables: [],\r\n        fields: [],\r\n        joins: [],\r\n        filters: [],\r\n        groupBy: [],\r\n        orderBy: [],\r\n        limit: null,\r\n        offset: null,\r\n        unionAllNext: false,\r\n        groupByInput: '',\r\n        orderByInput: { field: '', dir: 'ASC' }\r\n      };\r\n    },\r\n    \r\n    // Обновляет схему БД новыми таблицами из парсера\r\n    updateSchemaFromParsedData(parsed) {\r\n      const allTables = new Set();\r\n      \r\n      // Собираем все таблицы из CTE\r\n      parsed.ctes.forEach(cte => {\r\n        cte.queries.forEach(query => {\r\n          query.selectedTables.forEach(table => allTables.add(table));\r\n          query.joins.forEach(join => allTables.add(join.rightTable));\r\n        });\r\n      });\r\n      \r\n      // Собираем все таблицы из основных запросов\r\n      parsed.queries.forEach(query => {\r\n        query.selectedTables.forEach(table => allTables.add(table));\r\n        query.joins.forEach(join => allTables.add(join.rightTable));\r\n      });\r\n      \r\n      // Добавляем новые таблицы в схему\r\n      allTables.forEach(tableName => {\r\n        if (!this.store.schema.tables.find(t => t.name === tableName)) {\r\n          this.store.schema.tables.push({\r\n            name: tableName,\r\n            fields: [] // Поля будут добавлены автоматически при использовании\r\n          });\r\n        }\r\n      });\r\n    },\r\n    \r\n    // Обновляем метод для работы с расширенной схемой\r\n    tableFields(t) {\r\n      const table = this.extendedSchema.tables.find(x => x.name === t);\r\n      return table ? table.fields : [];\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n\r\n\r\n","import mod from \"-!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=64bc7f3b&scoped=true\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"64bc7f3b\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport App from './App.vue';\r\nimport './styles.css';\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n}).$mount('#app');\r\n\r\n\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunksql_constructor_vue2\"] = self[\"webpackChunksql_constructor_vue2\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(181)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","staticClass","_m","_l","extendedSchema","table","key","name","staticStyle","on","$event","toggleExpand","_v","_s","_e","fields","length","isExpanded","f","stopPropagation","addFieldFromSidebar","copySQL","class","active","store","currentCTEIndex","selectCTE","cte","idx","addCTE","q","currentQueryIndex","selectQuery","addQuery","directives","rawName","value","current","expression","attrs","domProps","Array","isArray","unionAllNext","_i","$$a","$$el","target","$$c","checked","$$v","$$i","$set","concat","slice","currentCTE","selectCTEQuery","addCTEQuery","opt","composing","addCustomField","ctes","removeCTE","queries","removeQuery","removeCTEQuery","sf","onFieldExpressionChange","$$selectedVal","prototype","filter","call","options","o","selected","map","val","_value","multiple","moveFieldUp","moveFieldDown","removeField","addJoin","joins","j","t","addJoinCondition","removeJoin","c","cIdx","left","right","removeJoinCondition","addFilter","filters","field","removeFilter","groupByInput","addGroup","g","removeGroup","orderByInput","addOrder","dir","removeOrder","modifiers","_n","$forceUpdate","applySQLChanges","cancelSQLEditing","isEditingSQL","startSQLEditing","editableSQL","sql","staticRenderFns","demoSchema","tables","createEmptyQuery","selectedTables","groupBy","orderBy","limit","offset","createEmptyCTE","isCTE","observable","schema","getters","currentQuery","currentItem","allAvailableTables","baseTables","cteTables","mutations","reset","push","index","splice","quoteIdentifier","id","String","replace","literal","trimmed","trim","test","buildSingleSQL","state","baseTable","fromTable","find","x","selectParts","expr","hasAggregateFunction","agg","fq","alias","joinParts","rightTable","type","op","onStr","join","Boolean","whereParts","i","part","toUpperCase","a","b","split","logic","groupStr","orderStr","limitStr","Number","offsetStr","buildCTESQL","cteQueries","queryParts","buildSQLFromQueries","parts","cteParts","cteSQL","line","parseCompleteSQL","sqlText","Error","cleanSQL","console","log","result","ctesPart","mainQueryPart","separateCTEsFromMain","parseCTEs","parseMainQueries","error","message","withRegex","depth","inQuotes","quoteChar","char","prevChar","remaining","substring","ctesText","cteDefinitions","splitCTEDefinitions","forEach","cteDef","parseSingleCTE","text","definitions","parenthesesLevel","cteText","cteMatch","match","cteName","cteBody","parseUnionQueries","mainQueryText","queryText","unionParts","splitByUnion","query","parseSelectQuery","isUnionAll","unionMatch","nextQueryStartsWithUnion","nextQuery","nextChar","nextRemaining","nextUnionMatch","splitQueryIntoParts","select","parseSelectClause","from","parseFromClause","parseJoins","where","parseWhereClause","parseGroupByClause","parseOrderByClause","parseLimitClause","selectMatch","fromMatch","joinMatches","searchStart","joinIndex","search","actualJoinIndex","joinStart","joinEnd","onMatch","joinClause","whereMatch","groupByMatch","orderByMatch","limitMatch","selectText","splitByCommaRespectingParentheses","fieldText","parseField","workingText","aliasMatch","aggMatch","innerField","innerTextRaw","innerText","tableFieldMatch","includes","fromText","tableName","joinTexts","joinText","parseJoin","joinMatch","conditions","splitByLogicalOperators","conditionObj","condMatch","condition","whereText","parseCondition","nextOperator","conditionText","groupByText","orderByText","orderMatch","limitText","parseInt","tokens","data","expanded","computed","allTables","base","Set","availableFields","add","has","firstQuery","fieldName","cteVirtualTables","methods","isTableInFrom","isTableInJoin","some","isTableAvailable","ensureTableAvailable","extractTablesFromExpression","tablePattern","exec","ensureTablesFromExpression","isFieldSelected","isTableSelected","findOrCreateField","item","findIndex","arr","tmp","conditionIndex","items","s","navigator","clipboard","writeText","catch","area","document","createElement","body","appendChild","execCommand","removeChild","parseAndApplySQL","alert","parsed","backup","JSON","parse","stringify","normalizeQuery","updateSchemaFromParsedData","tableFields","component","config","productionTip","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","Object","keys","every","r","d","definition","defineProperty","enumerable","get","globalThis","Function","e","window","obj","prop","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}